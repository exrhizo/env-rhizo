#!/usr/bin/env bash
# git-after-commit
#
# Usage:  git-after-commit <base-commit>
# Example: git-after-commit 967c58e638c652d06350f691be3d2120692ca5ab

set -euo pipefail
base="${1:?provide a commit hash}"

# Iterate over each local branch.
git for-each-ref --format='%(refname:short)' refs/heads |
while read -r branch; do
  # Is <base> an ancestor of <branch> *and* does <branch> have extra commits?
  if git merge-base --is-ancestor "$base" "$branch" \
     && [ "$(git rev-list --count "${base}..${branch}")" -gt 0 ]; then
    echo "$branch"
  fi
done
